{"ast":null,"code":"import React from 'react';\nconst TokenProvider = {\n  setTokens: function (access_token, refresh_token) {\n    localStorage.setItem(\"Access Token\", access_token);\n    localStorage.setItem(\"Refresh Token\", refresh_token);\n  },\n  setToken: function (token) {\n    if (token) {\n      localStorage.setItem(\"REACT_TOKEN_AUTH\", JSON.stringify(token));\n    } else {\n      localStorage.removeItem(\"REACT_TOKEN_AUTH\");\n    }\n  },\n  setRefreshToken: function (refresh_token) {\n    localStorage.setItem(\"Access Token\", access_token);\n    localStorage.setItem(\"Refresh Token\", refresh_token);\n  },\n  getExpirationDate: function (jwtToken) {\n    if (!jwtToken) {\n      return null;\n    }\n\n    const jwt = JSON.parse(jwtToken.split('.')[1]); // multiply by 1000 to convert seconds into milliseconds\n\n    return jwt && jwt.exp && jwt.exp * 1000;\n  },\n  isExpired: function (expirationDate) {\n    if (!expirationDate) {\n      return false;\n    }\n\n    return Date.now() > expirationDate;\n    /* Returns true if the expiration is invalid/expired */\n  },\n  getToken: async function () {\n    if (!localStorage.getItem(\"REACT_TOKEN_AUTH\")) {\n      return null;\n    }\n\n    if (isExpired(getExpirationDate(localStorage.getItem(\"REACT_TOKEN_AUTH\")))) {\n      /*\r\n      const updatedToken = await fetch('/update-token', {\r\n          method: 'POST',\r\n          // method to update token \r\n      })\r\n      */\n      // setToken(updatedToken);\n    }\n\n    return localStorage.getItem(\"REACT_TOKEN_AUTH\");\n  },\n  isLoggedIn: function () {\n    return;\n  }\n};\nexport default TokenProvider;","map":{"version":3,"sources":["C:/Users/Nrudo/Documents/gitHub_projects/Stock/src/main/ui/src/components/TokenProvider.js"],"names":["React","TokenProvider","setTokens","access_token","refresh_token","localStorage","setItem","setToken","token","JSON","stringify","removeItem","setRefreshToken","getExpirationDate","jwtToken","jwt","parse","split","exp","isExpired","expirationDate","Date","now","getToken","getItem","isLoggedIn"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,aAAa,GAAG;AAGlBC,EAAAA,SAAS,EAAE,UAASC,YAAT,EAAuBC,aAAvB,EAAsC;AAC7CC,IAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCH,YAArC;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCF,aAAtC;AACH,GANiB;AAQlBG,EAAAA,QAAQ,EAAE,UAASC,KAAT,EAAgB;AACtB,QAAIA,KAAJ,EAAW;AACPH,MAAAA,YAAY,CAACC,OAAb,CAAqB,kBAArB,EAAyCG,IAAI,CAACC,SAAL,CAAeF,KAAf,CAAzC;AACH,KAFD,MAEO;AACHH,MAAAA,YAAY,CAACM,UAAb,CAAwB,kBAAxB;AACH;AACJ,GAdiB;AAgBlBC,EAAAA,eAAe,EAAE,UAASR,aAAT,EAAwB;AACrCC,IAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCH,YAArC;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCF,aAAtC;AACH,GAnBiB;AAqBlBS,EAAAA,iBAAiB,EAAE,UAASC,QAAT,EAAmB;AAClC,QAAI,CAACA,QAAL,EAAe;AACX,aAAO,IAAP;AACH;;AAED,UAAMC,GAAG,GAAGN,IAAI,CAACO,KAAL,CAAWF,QAAQ,CAACG,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAX,CAAZ,CALkC,CAOlC;;AACA,WAAOF,GAAG,IAAIA,GAAG,CAACG,GAAX,IAAkBH,GAAG,CAACG,GAAJ,GAAU,IAAnC;AACH,GA9BiB;AAgClBC,EAAAA,SAAS,EAAG,UAASC,cAAT,EAAyB;AACjC,QAAI,CAACA,cAAL,EAAqB;AACjB,aAAO,KAAP;AACH;;AAED,WAAOC,IAAI,CAACC,GAAL,KAAaF,cAApB;AAAoC;AACvC,GAtCiB;AAyClBG,EAAAA,QAAQ,EAAE,kBAAiB;AACvB,QAAI,CAAClB,YAAY,CAACmB,OAAb,CAAqB,kBAArB,CAAL,EAA+C;AAC3C,aAAO,IAAP;AACH;;AAED,QAAIL,SAAS,CAACN,iBAAiB,CAACR,YAAY,CAACmB,OAAb,CAAqB,kBAArB,CAAD,CAAlB,CAAb,EAA4E;AACxE;AACZ;AACA;AACA;AACA;AACA;AAEY;AACH;;AACD,WAAOnB,YAAY,CAACmB,OAAb,CAAqB,kBAArB,CAAP;AACH,GAzDiB;AA2DlBC,EAAAA,UAAU,EAAE,YAAW;AACnB;AACH;AA7DiB,CAAtB;AAkEA,eAAexB,aAAf","sourcesContent":["import React from 'react';\r\n\r\nconst TokenProvider = {\r\n\r\n    \r\n    setTokens: function(access_token, refresh_token) {\r\n        localStorage.setItem(\"Access Token\", access_token);\r\n        localStorage.setItem(\"Refresh Token\", refresh_token);\r\n    },\r\n\r\n    setToken: function(token) {\r\n        if (token) {\r\n            localStorage.setItem(\"REACT_TOKEN_AUTH\", JSON.stringify(token));\r\n        } else {\r\n            localStorage.removeItem(\"REACT_TOKEN_AUTH\");\r\n        }\r\n    },\r\n\r\n    setRefreshToken: function(refresh_token) {\r\n        localStorage.setItem(\"Access Token\", access_token);\r\n        localStorage.setItem(\"Refresh Token\", refresh_token);\r\n    },\r\n\r\n    getExpirationDate: function(jwtToken) {\r\n        if (!jwtToken) {\r\n            return null;\r\n        }\r\n    \r\n        const jwt = JSON.parse(jwtToken.split('.')[1]);\r\n    \r\n        // multiply by 1000 to convert seconds into milliseconds\r\n        return jwt && jwt.exp && jwt.exp * 1000;\r\n    },\r\n\r\n    isExpired:  function(expirationDate) {\r\n        if (!expirationDate) {\r\n            return false;\r\n        }\r\n\r\n        return Date.now() > expirationDate; /* Returns true if the expiration is invalid/expired */\r\n    },\r\n\r\n\r\n    getToken: async function() {\r\n        if (!localStorage.getItem(\"REACT_TOKEN_AUTH\")) {\r\n            return null;\r\n        }\r\n\r\n        if (isExpired(getExpirationDate(localStorage.getItem(\"REACT_TOKEN_AUTH\")))) {\r\n            /*\r\n            const updatedToken = await fetch('/update-token', {\r\n                method: 'POST',\r\n                // method to update token \r\n            })\r\n            */\r\n\r\n            // setToken(updatedToken);\r\n        }\r\n        return localStorage.getItem(\"REACT_TOKEN_AUTH\");\r\n    },\r\n\r\n    isLoggedIn: function() { \r\n        return \r\n    }\r\n\r\n\r\n}\r\n\r\nexport default TokenProvider;"]},"metadata":{},"sourceType":"module"}